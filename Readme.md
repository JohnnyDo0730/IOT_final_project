# Database Final Project

é€™æ˜¯æˆ‘å€‘çš„è³‡æ–™åº«æœŸæœ«å°ˆæ¡ˆï¼ŒåŒ…å«åˆå§‹åŒ–ç’°å¢ƒæ­¥é©Ÿã€Git ä½¿ç”¨æµç¨‹èˆ‡å‘½åè¦å‰‡ç­‰èªªæ˜ã€‚

## ğŸ“‹ å°ˆæ¡ˆæ¶æ§‹

```
project/
â”‚
â”œâ”€â”€ app/                        # æ‡‰ç”¨ç¨‹å¼ä¸»ç›®éŒ„
â”‚   â”œâ”€â”€ __init__.py             # æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–
â”‚   â”œâ”€â”€ data/                   # è³‡æ–™ç›¸é—œæª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ insert_fake_data.sql # æ’å…¥å‡è³‡æ–™çš„ SQL æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ schema.sql          # è³‡æ–™åº« schema å®šç¾©æª”æ¡ˆ
â”‚   â”‚   â””â”€â”€ insert_fake_data.py # æ’å…¥å‡è³‡æ–™çš„ Python è…³æœ¬
â”‚   â”œâ”€â”€ route/                  # è·¯ç”±æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ __init__.py         # è·¯ç”±åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ front_routes.py     # å‰å°é é¢è·¯ç”±
â”‚   â”‚   â””â”€â”€ esp_routes.py       # ESP32 ç›¸é—œè·¯ç”±
â”‚   â”œâ”€â”€ service/                # æœå‹™å±¤
â”‚   â”‚   â””â”€â”€ __init__.py         # æœå‹™å±¤åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ front_service.py     # å‰å°é é¢æœå‹™å±¤
â”‚   â”‚   â””â”€â”€ esp_service.py       # ESP32 ç›¸é—œæœå‹™å±¤
â”‚   â”œâ”€â”€ templates/              # HTML æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ index.html          # ä¸»é é¢æ¨¡æ¿
â”‚   â””â”€â”€ util/                   # å·¥å…·å‡½æ•¸
â”‚       â””â”€â”€ db.py               # è³‡æ–™åº«é€£æ¥å·¥å…·
â”‚
â”œâ”€â”€ esp32/                      # ESP32 éŸŒé«”ç¨‹å¼ç¢¼
â”‚   â””â”€â”€ ultrasonic/             # è¶…éŸ³æ³¢æ¨¡çµ„ç¨‹å¼ç¢¼ (åŒ…å«æ‰€æœ‰æœ€çµ‚åŠŸèƒ½)
â”‚       â””â”€â”€ ultrasonic.ino      # è¶…éŸ³æ³¢æ„Ÿæ¸¬å™¨ä¸»ç¨‹å¼æª”æ¡ˆ
â”‚
â”œâ”€â”€ run.py                      # æ‡‰ç”¨ç¨‹å¼å…¥å£é»
â”œâ”€â”€ Pipfile                     # ä¾è³´ç®¡ç†
â”œâ”€â”€ Pipfile.lock                # ä¾è³´ç‰ˆæœ¬é–å®š
â”œâ”€â”€ instance/                   # è³‡æ–™åº«å¯¦ä¾‹ç›®éŒ„
â”œâ”€â”€ self/                       # ç§äººæª”æ¡ˆç›®éŒ„ (ä¸è¿½è¹¤ç‰ˆæœ¬)
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥æª”æ¡ˆè¨­å®š
â””â”€â”€ Readme.md                   # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### è£œå……èªªæ˜
- ç§äººæª”æ¡ˆ(æ²’æœ‰è¦ä¸Šå‚³çš„)ï¼Œè«‹æ”¾åœ¨project_root/selfè£¡é¢
- å…¶ä»–ä¸æƒ³ä¸Šå‚³çš„æª”æ¡ˆå¯åœ¨.gitignoreä¸­æ–°å¢è·¯å¾‘ä¾†è‡ªå‹•å¿½ç•¥

### ç’°å¢ƒéœ€æ±‚

- Python 3.12
- pipenv (ç”¨æ–¼ç®¡ç†è™›æ“¬ç’°å¢ƒå’Œä¾è³´)

### å®‰è£æ­¥é©Ÿ

1. è¤‡è£½å°ˆæ¡ˆåˆ°æœ¬åœ°

```bash
git init
git remote add origin https://github.com/JohnnyDo0730/IOT_final_project.git
git pull origin main
```

2. å®‰è£ä¾è³´

```bash
pip install pipenv
pipenv install
```

3. å•Ÿå‹•è™›æ“¬ç’°å¢ƒ

```bash
pipenv shell
```

4. å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ï¼ˆå¼·åˆ¶ä½¿ç”¨ç•¶å‰è™›æ“¬ç’°å¢ƒåŸ·è¡Œï¼‰

```bash
pipenv run python run.py
```

æ‡‰ç”¨ç¨‹å¼å°‡åœ¨ http://localhost:5000 å•Ÿå‹•

5. é€€å‡ºè™›æ“¬ç’°å¢ƒ

```bash
exit
```

---

## ğŸ”ƒ Git å¸¸ç”¨æ“ä½œæµç¨‹

### ç²å–é ç«¯æ›´æ–°ï¼ˆ**æ¯æ¬¡é–‹å§‹ä½œæ¥­å‰**ï¼‰

```bash
git pull origin main
```

### æ–°å¢æˆ–æ›´æ–°æª”æ¡ˆå¾Œï¼Œå°‡è®Šæ›´æäº¤èˆ‡ä¸Šå‚³

```bash
git checkout -b feature/some-feature-name
git add .
git commit -m "ç°¡è¦èªªæ˜æœ¬æ¬¡è®Šæ›´"
git push origin feature/some-feature-name
```

---
ğŸŒ¿ åˆ†æ”¯å‘½ååŸå‰‡
è«‹ä¾æ“šç”¨é€”å»ºç«‹åˆ†æ”¯ï¼Œå»ºè­°æ ¼å¼å¦‚ä¸‹ï¼š

| é¡å‹ | å‘½åç¯„ä¾‹                    | èªªæ˜      |
| -- | ----------------------- | ------- |
| åŠŸèƒ½ | `feature/login-system`  | æ–°å¢åŠŸèƒ½    |
| ä¿®å¾© | `fix/login-bug`         | ä¿®æ­£éŒ¯èª¤    |
| é‡æ§‹ | `refactor/db-structure` | èª¿æ•´æ¶æ§‹æˆ–é‡æ§‹ |
| æ–‡ä»¶ | `docs/update-readme`    | ä¿®æ”¹èªªæ˜æ–‡ä»¶  |
| æ¸¬è©¦ | `test/db-connection`    | æ¸¬è©¦åŠŸèƒ½ç›¸é—œ  |

---

 âœï¸ Commit å‘½åå»ºè­°

è«‹ç”¨ç°¡æ½”æ˜ç¢ºçš„æ–¹å¼å‘½å commit è¨Šæ¯ï¼Œä¾‹å¦‚ï¼š

* `add login feature`
* `fix bug in signup logic`
* `update ER diagram`
* `refactor query structure`
* `docs: update README.md`

---

## ğŸ”§ æŠ€è¡“æ¶æ§‹

- **å‰ç«¯**ï¼šHTMLã€CSSã€JavaScript
- **å¾Œç«¯**ï¼šPythonã€Flaskã€ESP32
- **è³‡æ–™åº«**ï¼šSQLite (å…§å»ºæ–¼ Python æ¨™æº–åº«)
- **ç¡¬é«”**ï¼šESP32
- **ç’°å¢ƒç®¡ç†**ï¼špipenv

## ğŸ“ é–‹ç™¼æ³¨æ„äº‹é …

1. è³‡æ–™åº«æª”æ¡ˆæœƒè‡ªå‹•åœ¨ `instance` ç›®éŒ„ä¸‹å‰µå»º
2. åˆå§‹åŒ–è³‡æ–™åº«å¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤(åªæœ‰ç¬¬ä¸€æ¬¡éœ€è¦åŸ·è¡Œ)ï¼š
   ```bash
   pipenv shell
   flask init-db
   ```
3. æ¸¬è©¦è³‡æ–™åº«å¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤(æ–°å¢æ¸¬è©¦å‡è³‡æ–™)ï¼š
   ```bash
   pipenv shell
   python app\data\insert_fake_data.py
   ```
4. é–‹ç™¼æ–°åŠŸèƒ½æ™‚ï¼Œè«‹éµå¾ªä»¥ä¸‹æ­¥é©Ÿï¼š
   - å‰µå»ºæ–°åˆ†æ”¯
   - åœ¨é©ç•¶ç›®éŒ„ä¸‹æ·»åŠ åŠŸèƒ½æ¨¡çµ„
   - æ›´æ–°ç›¸é—œè·¯ç”±
   - æäº¤è®Šæ›´ä¸¦ç™¼èµ· Pull Request
